<!DOCTYPE html>
<html lang="en">
  <%- include("./partial/head") %>
  <body>
    <%- include("./partial/navbar") %>
    <div class="details-blog">
      <header>
        <h1><%= details.title %></h1>
        <i
          class="fa fa-trash delete"
          aria-hidden="true"
          data-id="<%= details._id %>"
        ></i>
      </header>
      <div
        class="img"
        style="background-image: url('<%= details.imgUrl %>')"
      ></div>
      <p><%= details.body %></p>
    </div>

    <script>
      const deleteBtn = document.querySelector("i.delete");

      deleteBtn.addEventListener("click", () => {
        const id = deleteBtn.dataset.id;
        const uri = `/blogs/${id}`;

        fetch(uri, {
          method: "DELETE",
        })
          .then((result) => result.json())
          .then((res) => (window.location.href = res.redirect))
          .catch((err) => console.log(err.message));
      });
    </script>
  </body>
</html>
